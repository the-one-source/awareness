
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Spectrum of Awareness</title>
<style>
  :root{
    --panel-width:1000px;
    --accent:#666440;
    --bg:#f5f7fa;
    --card:#ffffff;
    --muted:#666;
    --text:#111;
  }
  html,body{height:100%;margin:0;background:var(--bg);font-family:-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--text);}
  .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:20px;}
  .panel{width:min(98%,var(--panel-width));max-width:var(--panel-width);background:var(--card);border-radius:14px;box-shadow:0 10px 30px rgba(20,20,30,0.06);padding:28px;box-sizing:border-box;}
  h1{margin:0 0 14px 0;font-weight:400;color:#444;font-size:22px;text-align:center;}
  .row{display:flex;justify-content:center;gap:12px;align-items:center;margin-bottom:14px;}
  select{padding:8px 12px;font-size:15px;border-radius:8px;border:1px solid #e6e6e6;background:white;}
  p.lead{margin:0 0 12px 0;color:#666;font-size:15px;line-height:1.45;text-align:center;}
  .fixed-slider-wrap{width:100%;display:flex;flex-direction:column;align-items:center;gap:8px;margin:12px 0;}
  .fixed-track{width:92%;max-width:880px;}
  input[type="range"]{-webkit-appearance:none;width:100%;height:12px;border-radius:10px;background:#e6e6e6;outline:none;margin:0;padding:0;}
  input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:34px;height:18px;border-radius:9px;background:var(--accent);box-shadow:0 6px 18px rgba(102,100,64,0.24);border:2px solid white;margin-top:-3px;cursor:pointer;}
  .slider-labels{width:92%;max-width:880px;display:flex;justify-content:space-between;color:var(--muted);font-size:13px;margin-top:6px;user-select:none;}
  .btn{display:inline-block;padding:12px 22px;border-radius:28px;background:var(--accent);color:white;border:none;font-size:15px;cursor:pointer;box-shadow:0 6px 18px rgba(102,100,64,0.18);margin-top:12px;}
  .btn:active{transform:translateY(1px);}
  .result-grid{margin-top:12px;color:#333;font-size:15px;display:flex;gap:12px;justify-content:space-between;align-items:stretch;}
  .result-stage{font-weight:700;flex:1;padding:12px;background:#fbfbfb;border-radius:10px;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:6px;min-height:92px;box-sizing:border-box;}
  .result-stage:hover{box-shadow:0 6px 18px rgba(102,100,64,0.06);}
  .result-stage .label{font-size:14px;color:#555;}
  .result-score{font-size:20px;color:#222;margin-top:6px;font-weight:700;}
  .result-dominant{margin-top:16px;padding:14px;background:#fff9e6;border-radius:10px;border:1px solid rgba(102,100,64,0.08);font-size:15px;}
  .stage-details{overflow:hidden;max-height:0;transition:max-height .36s ease;padding:0 10px;box-sizing:border-box;}
  .stage-details.open{max-height:680px;padding:12px 12px 18px 12px;}
  .stage-details .content{font-size:14px;color:#333;line-height:1.45;}
  footer.note{margin-top:14px;color:#666;font-size:13px;text-align:center;}
  @media (max-width:820px){ .result-grid{flex-direction:column;} .result-stage{width:100%} .panel{padding:18px;} }
  /* RTL handling */
  :root[dir="rtl"] .panel{direction:rtl;}
  :root[dir="rtl"] .slider-labels{direction:rtl;}
</style>
</head>
<body>
<div class="wrap">
  <div class="panel" id="panel">

    <h1 id="pageTitle">Spectrum of Awareness</h1>

    <div class="row" id="langRow">
      <select id="langSelect" aria-label="Language">
        <option value="en">English</option>
        <option value="de">Deutsch</option>
        <option value="fa">فارسی</option>
      </select>
    </div>

    <!-- Landing -->
    <div id="landingPane">
      <p class="lead" id="landingText">This is a reflection of my inner consciousness called Spectrum of Awareness. I am answering a series of statements using the slider to indicate my agreement.</p>

      <div class="fixed-slider-wrap">
        <div class="fixed-track">
          <input id="landingSlider" type="range" min="0" max="10" value="5" />
        </div>
        <div class="slider-labels" id="landingLabels">
          <span id="lblLeft">Disagree</span>
          <span id="lblMid">Uncertain</span>
          <span id="lblRight">Agree</span>
        </div>
      </div>

      <div style="text-align:center;"><button id="startBtn" class="btn">Start</button></div>
    </div>

    <!-- Questionnaire -->
    <div id="questionPane" class="hidden" aria-live="polite">
      <div id="questionText" role="heading" aria-level="2" style="text-align:center;font-size:18px;line-height:1.45;margin:6px 0 14px 0;"></div>

      <div class="fixed-slider-wrap">
        <div class="fixed-track">
          <input id="questionSlider" type="range" min="0" max="10" value="5" />
        </div>
        <div class="slider-labels" id="questionLabels">
          <span id="qLblLeft">Disagree</span>
          <span id="qLblMid">Uncertain</span>
          <span id="qLblRight">Agree</span>
        </div>
      </div>

      <div style="text-align:center;"><button id="nextBtn" class="btn">Next</button></div>
    </div>

    <!-- Result pane -->
    <div id="resultPane" class="hidden">
      <div class="result-grid" aria-hidden="false">
        <div class="result-stage" id="stageIButton"><div class="label">Stage I</div><div class="result-score" id="scoreI">0.0</div></div>
        <div class="result-stage" id="stageIIButton"><div class="label">Stage II</div><div class="result-score" id="scoreII">0.0</div></div>
        <div class="result-stage" id="stageIIIButton"><div class="label">Stage III</div><div class="result-score" id="scoreIII">0.0</div></div>
      </div>

      <div id="dominantBox" class="result-dominant"></div>

      <!-- Expandable details for each stage -->
      <div style="margin-top:14px;">
        <div id="stageIDetails" class="stage-details" aria-hidden="true">
          <div class="content" id="stageIContent"></div>
        </div>

        <div id="stageIIDetails" class="stage-details" aria-hidden="true">
          <div class="content" id="stageIIContent"></div>
        </div>

        <div id="stageIIIDetails" class="stage-details" aria-hidden="true">
          <div class="content" id="stageIIIContent"></div>
        </div>
      </div>

      <div style="margin-top:18px;text-align:center;"><button id="restartBtn" class="btn">Restart</button></div>
    </div>

    <footer class="note" id="footerNote" aria-hidden="true"></footer>
  </div>
</div>

<script>
// QUESTIONS array (keep original full array from your code)
const QUESTIONS = [
  {stage:1,en:"Life happens to me.",de:"Das Leben passiert mir.",fa:"زندگی برای من اتفاق می‌افتد."},
  {stage:2,en:"Life happens through me.",de:"Das Leben passiert durch mich.",fa:"زندگی از طریق من اتفاق می‌افتد."},
  {stage:3,en:"Life happens as me.",de:"Das Leben passiert als ich.",fa:"زندگی همان من است که رخ می‌دهد."},

  {stage:1,en:"I feel life is unfair or against me.",de:"Ich fühle, das Leben ist unfair oder gegen mich.",fa:"من احساس می‌کنم زندگی ناعادلانه است یا علیه من است."},
  {stage:2,en:"I notice patterns repeating and wonder why.",de:"Ich bemerke sich wiederholende Muster und frage mich warum.",fa:"من الگوهای تکراری را مشاهده می‌کنم و می‌پرسم چرا."},
  {stage:3,en:"I see all as one flow of consciousness.",de:"Ich sehe alles als einen Fluss des Bewusstseins.",fa:"من همه چیز را به‌عنوان یک جریان واحد آگاهی می‌بینم."},

  {stage:1,en:"I am the victim of life.",de:"Ich bin das Opfer des Lebens.",fa:"من قربانی زندگی هستم."},
  {stage:2,en:"I am connected to a source (higher self, God).",de:"Ich bin mit einer Quelle (höheres Selbst, Gott) verbunden.",fa:"من به یک منبع (خود برتر، خدا) متصل هستم."},
  {stage:3,en:"I am the only source; God is a concept within me.",de:"Ich bin die einzige Quelle; Gott ist ein Konzept in mir.",fa:"من تنها منبع هستم؛ خدا مفهومی درون من است."},

  {stage:1,en:"I need validation to feel seen.",de:"Ich brauche Bestätigung, um gesehen zu werden.",fa:"من برای دیده شدن به تأیید نیاز دارم."},
  {stage:2,en:"I am validated and seen.",de:"Ich bin bestätigt und gesehen.",fa:"من تأیید و دیده شده‌ام."},
  {stage:3,en:"I am the only validation.",de:"Ich bin die einzige Bestätigung.",fa:"من تنها تأیید هستم."},

  {stage:1,en:"I blame society for everything I experience.",de:"Ich gebe der Gesellschaft die Schuld für alles, was ich erlebe.",fa:"من جامعه را برای همه چیز سرزنش می‌کنم."},
  {stage:2,en:"I blame myself for what I experience.",de:"Ich gebe mir selbst die Schuld für das, was ich erlebe.",fa:"من خودم را برای تجربه‌هایم سرزنش می‌کنم."},
  {stage:3,en:"I blame no one; all arises from me.",de:"Ich gebe niemandem die Schuld; alles entsteht aus mir.",fa:"من کسی را سرزنش نمی‌کنم؛ همه چیز از من برمی‌خیزد."},

  {stage:1,en:"I feel disconnected or unseen.",de:"Ich fühle mich getrennt oder ungesehen.",fa:"من احساس جدایی یا نادیده گرفته شدن می‌کنم."},
  {stage:2,en:"I feel glimpses of unity and flow.",de:"Ich spüre Momente der Einheit und des Flusses.",fa:"من لحظاتی از وحدت و جریان را تجربه می‌کنم."},
  {stage:3,en:"I live without striving; I am being.",de:"Ich lebe ohne Anstrengung; ich bin.",fa:"من بدون تلاش زندگی می‌کنم؛ من هستم."},

  {stage:1,en:"I was created.",de:"Ich wurde erschaffen.",fa:"من خلق شده‌ام."},
  {stage:2,en:"I am questioning creation.",de:"Ich hinterfrage die Schöpfung.",fa:"من در مورد خلقت سؤال می‌کنم."},
  {stage:3,en:"I am the only creator.",de:"Ich bin der einzige Schöpfer.",fa:"من تنها خالق هستم."},

  {stage:1,en:"There is someone or something out there.",de:"Da ist jemand oder etwas da draußen.",fa:"کسی یا چیزی در بیرون وجود دارد."},
  {stage:2,en:"Is there anyone out there?",de:"Gibt es jemanden da draußen?",fa:"آیا کسی در بیرون هست؟"},
  {stage:3,en:"There is no one; only I experience myself.",de:"Es ist niemand da; nur ich erlebe mich selbst.",fa:"هیچ‌کس نیست؛ تنها من خودم را تجربه می‌کنم."},

  {stage:1,en:"Someone has built the wall.",de:"Jemand hat die Mauer gebaut.",fa:"کسی دیوار را ساخته است."},
  {stage:2,en:"I am a brick in the wall.",de:"Ich bin ein Ziegel in der Mauer.",fa:"من یک آجر در دیوار هستم."},
  {stage:3,en:"I am the wall, shaping it constantly.",de:"Ich bin die Mauer, die sie ständig formt.",fa:"من دیوار هستم و آن را دائماً شکل می‌دهم."},

  {stage:1,en:"Somebody has built the road.",de:"Jemand hat die Straße gebaut.",fa:"کسی جاده را ساخته است."},
  {stage:2,en:"Who built the road?",de:"Wer hat die Straße gebaut?",fa:"چه کسی جاده را ساخته است؟"},
  {stage:3,en:"As I walk, the road appears; all is my creation.",de:"Während ich gehe, erscheint die Straße; alles ist meine Schöpfung.",fa:"همان‌طور که راه می‌روم، جاده ظاهر می‌شود؛ همه چیز خلق من است."},

  {stage:1,en:"I feel powerless to change what happens.",de:"Ich fühle mich machtlos, das Geschehen zu ändern.",fa:"من قدرت تغییر آنچه اتفاق می‌افتد را ندارم."},
  {stage:2,en:"I am the change; I need to act.",de:"Ich bin die Veränderung; ich muss handeln.",fa:"من تغییر هستم؛ باید عمل کنم."},
  {stage:3,en:"I hold no resistance; all is perfectly aligned with me.",de:"Ich widerstehe nichts; alles ist perfekt mit mir ausgerichtet.",fa:"من هیچ مقاومتی ندارم؛ همه چیز کاملاً با من هماهنگ است."},

  {stage:1,en:"I believe luck or fate decides outcomes.",de:"Ich glaube, Glück oder Schicksal entscheidet die Ergebnisse.",fa:"من باور دارم شانس یا سرنوشت نتایج را تعیین می‌کند."},
  {stage:2,en:"I trust life more than I resist it.",de:"Ich vertraue dem Leben mehr, als dass ich Widerstand leiste.",fa:"من به زندگی بیشتر از مقاومت اعتماد می‌کنم."},
  {stage:3,en:"I radiate fairness; all outcomes flow through me.",de:"Ich strahle Gerechtigkeit aus; alle Ergebnisse fließen durch mich.",fa:"من عدالت می‌تابانم؛ همه نتایج از طریق من جریان دارند."},

  {stage:1,en:"I see others as separate beings on their own journey.",de:"Ich sehe andere als separate Wesen auf ihrem eigenen Weg.",fa:"من دیگران را موجودات جداگانه در مسیر خود می‌بینم."},
  {stage:2,en:"I see others as mirrors, reflecting and teaching me.",de:"Ich sehe andere als Spiegel, die mich reflektieren und lehren.",fa:"من دیگران را به‌عنوان آیینه‌ای می‌بینم که بازتاب می‌دهند و به من آموزش می‌دهند."},
  {stage:3,en:"I see others only as shadows I create; only characters I allow.",de:"Ich sehe andere nur als Schatten, die ich erschaffe; nur Figuren, die ich erlaube.",fa:"من دیگران را تنها به‌عنوان سایه‌هایی که خلق می‌کنم می‌بینم؛ فقط شخصیت‌هایی که اجازه می‌دهم."},

  {stage:1,en:"I fear losing control.",de:"Ich habe Angst, die Kontrolle zu verlieren.",fa:"من از دست دادن کنترل می‌ترسم."},
  {stage:2,en:"I see no separation between creation and creator.",de:"Ich sehe keine Trennung zwischen Schöpfung und Schöpfer.",fa:"من جدایی بین خلق و خالق را نمی‌بینم."},
  {stage:3,en:"There are no others; only I experience my creation.",de:"Es gibt keine anderen; nur ich erlebe meine Schöpfung.",fa:"هیچ دیگری وجود ندارد؛ تنها من خلق خود را تجربه می‌کنم."},

  {stage:1,en:"There is God.",de:"Es gibt Gott.",fa:"خدا وجود دارد."},
  {stage:2,en:"Is there a God?",de:"Gibt es einen Gott?",fa:"آیا خدایی وجود دارد؟"},
  {stage:3,en:"There is no God; only I exist.",de:"Es gibt keinen Gott; nur ich existiere.",fa:"خدایی وجود ندارد؛ تنها من هستم."},

  {stage:1,en:"I need to belong to feel whole.",de:"Ich muss dazugehören, um mich vollständig zu fühlen.",fa:"من نیاز دارم تعلق داشته باشم تا کامل باشم."},
  {stage:2,en:"I am not alone; I belong.",de:"Ich bin nicht allein; ich gehöre dazu.",fa:"من تنها نیستم؛ تعلق دارم."},
  {stage:3,en:"I am alone; the only one.",de:"Ich bin allein; der Einzige.",fa:"من تنها هستم؛ تنها یک موجود."},

  {stage:1,en:"I often compare myself to others.",de:"Ich vergleiche mich oft mit anderen.",fa:"من اغلب خود را با دیگران مقایسه می‌کنم."},
  {stage:2,en:"I recognize reflections in others.",de:"Ich erkenne Spiegelungen in anderen.",fa:"من بازتاب‌ها را در دیگران تشخیص می‌دهم."},
  {stage:3,en:"I know love as my natural state.",de:"Ich kenne Liebe als meinen natürlichen Zustand.",fa:"من عشق را به‌عنوان حالت طبیعی خود می‌شناسم."},

  {stage:1,en:"I think peace depends on circumstances.",de:"Ich glaube, Frieden hängt von den Umständen ab.",fa:"من فکر می‌کنم صلح به شرایط بستگی دارد."},
  {stage:2,en:"I begin to see love behind appearances.",de:"Ich beginne, Liebe hinter Erscheinungen zu sehen.",fa:"من شروع می‌کنم عشق پشت ظاهرها را ببینم."},
  {stage:3,en:"I am love observing myself.",de:"Ich bin die Liebe, die sich selbst beobachtet.",fa:"من عشق هستم که خود را مشاهده می‌کنم."},

  {stage:1,en:"I hold resentment or blame.",de:"Ich hege Groll oder Schuldgefühle.",fa:"من دلخوری یا سرزنش دارم."},
  {stage:2,en:"I begin forgiving and letting go.",de:"Ich beginne zu vergeben und loszulassen.",fa:"من شروع می‌کنم به بخشیدن و رها کردن."},
  {stage:3,en:"I understand nothing is missing; all is integrated in me.",de:"Ich verstehe, dass nichts fehlt; alles ist in mir integriert.",fa:"من می‌فهمم هیچ چیزی کم نیست؛ همه چیز در من یکپارچه است."},

  {stage:1,en:"There is hell and heaven.",de:"Es gibt Himmel und Hölle.",fa:"جهنم و بهشت وجود دارد."},
  {stage:2,en:"Hell and heaven are states of being.",de:"Himmel und Hölle sind Zustände des Seins.",fa:"جهنم و بهشت حالت‌های هستی هستند."},
  {stage:3,en:"There is no hell or heaven; only I experience myself.",de:"Es gibt kein Himmel oder Hölle; nur ich erlebe mich selbst.",fa:"هیچ جهنم یا بهشتی وجود ندارد؛ تنها من خودم را تجربه می‌کنم."},

  {stage:1,en:"There is always someone to blame for events or my experience.",de:"Es gibt immer jemanden, dem man die Schuld geben kann.",fa:"همیشه کسی برای سرزنش وجود دارد."},
  {stage:2,en:"I only blame myself for what I experience.",de:"Ich gebe nur mir selbst die Schuld für das, was ich erlebe.",fa:"من تنها خودم را برای آنچه تجربه می‌کنم سرزنش می‌کنم."},
  {stage:3,en:"I blame no one; all arises from me.",de:"Ich gebe niemandem die Schuld; alles entsteht aus mir.",fa:"من کسی را سرزنش نمی‌کنم؛ همه چیز از من برمی‌خیزد."},

  {stage:1,en:"I need to be acknowledged.",de:"Ich muss anerkannt werden.",fa:"من نیاز دارم که به رسمیت شناخته شوم."},
  {stage:2,en:"I question whether acknowledgement matters.",de:"Ich hinterfrage, ob Anerkennung wichtig ist.",fa:"من می‌پرسم آیا به رسمیت شناختن مهم است؟"},
  {stage:3,en:"I am acknowledgement.",de:"Ich bin Anerkennung.",fa:"من خودم رسمیت هستم."},

  {stage:1,en:"I am constantly judging others.",de:"Ich urteile ständig über andere.",fa:"من مدام دیگران را قضاوت می‌کنم."},
  {stage:2,en:"I try not to judge, but I judge myself.",de:"Ich versuche nicht zu urteilen, aber ich urteile über mich selbst.",fa:"من سعی می‌کنم قضاوت نکنم، اما خودم را قضاوت می‌کنم."},
  {stage:3,en:"There is no judgment.",de:"Es gibt kein Urteil.",fa:"قضاوتی وجود ندارد."},

  {stage:1,en:"There is a history before me.",de:"Es gibt eine Geschichte vor mir.",fa:"تاریخی قبل از من وجود دارد."},
  {stage:2,en:"I think there is a source giving all beings consciousness.",de:"Ich erkenne, dass es eine Quelle gibt, die allen Wesen Bewusstsein verleiht.",fa:"من می‌دانم منبعی وجود دارد که به همه موجودات آگاهی می‌دهد."},
  {stage:3,en:"Time is an illusion; everything is in the now.",de:"Zeit ist eine Illusion; alles existiert im Jetzt.",fa:"زمان توهم است؛ همه چیز در اکنون است."},

  {stage:1,en:"Life is being projected to me.",de:"Das Leben wird mir projiziert.",fa:"زندگی برای من تجسم می‌شود."},
  {stage:2,en:"Reality is a co-creation; I am projecting and being projected.",de:"Die Realität ist eine Mit-Schöpfung; ich projiziere und werde projiziert.",fa:"واقعیت یک هم‌آفرینی است؛ من پروژه می‌کنم و پروژه می‌شوم."},
  {stage:3,en:"Let there be light; I only project my thoughts and feelings.",de:"Es werde Licht; ich projiziere nur meine Gedanken und Gefühle.",fa:"بگذار نور باشد؛ من فقط افکار و احساسات خود را تجسم می‌کنم."},

  {stage:1,en:"I perceive reality as external and separate from me.",de:"Ich nehme die Realität als extern und getrennt von mir wahr.",fa:"من واقعیت را جدا و بیرونی نسبت به خود می‌بینم."},
  {stage:2,en:"I recognize that my perception shapes what I call reality.",de:"Ich erkenne, dass meine Wahrnehmung formt, was ich Realität nenne.",fa:"من می‌دانم که ادراک من آنچه واقعیت می‌نامم را شکل می‌دهد."},
  {stage:3,en:"All reality is my own consciousness; I am both observer and observed.",de:"Alle Realität ist mein eigenes Bewusstsein; ich bin Beobachter und Beobachtetes.",fa:"همه واقعیت آگاهی خود من است؛ من هم ناظر و هم مشاهده‌شده هستم."},

  {stage:1,en:"I am influenced by past experiences and patterns.",de:"Ich bin von vergangenen Erfahrungen und Mustern beeinflusst.",fa:"من تحت تأثیر تجربیات و الگوهای گذشته هستم."},
  {stage:2,en:"I see the threads of causality and my participation in them.",de:"Ich sehe die Fäden der Kausalität und meine Beteiligung daran.",fa:"من تارهای علیت و مشارکت خود را در آنها می‌بینم."},
  {stage:3,en:"I am timeless; all causes and effects are me, fully present.",de:"Ich bin zeitlos; alle Ursachen und Wirkungen sind ich, vollständig präsent.",fa:"من بی‌زمان هستم؛ همه علل و معلول‌ها من هستم، کاملاً حاضر."},

  {stage:1,en:"I seek answers outside myself.",de:"Ich suche Antworten außerhalb von mir.",fa:"من دنبال پاسخ بیرون از خودم می‌گردم."},
  {stage:2,en:"I begin to find truth within my own awareness.",de:"Ich beginne, Wahrheit in meinem eigenen Bewusstsein zu finden.",fa:"من شروع به یافتن حقیقت در آگاهی خود می‌کنم."},
  {stage:3,en:"All knowing arises within me; there is no outside, only insight.",de:"Alles Wissen entsteht in mir; هیچ بیرونی وجود ندارد، تنها بینش هست.",fa:"همه دانایی درون من پدید می‌آید؛ هیچ بیرونی وجود ندارد، فقط بینش است."},

  {stage:1,en:"I feel bound by limitations of body and mind.",de:"Ich fühle mich durch Körper- und Geistesgrenzen gebunden.",fa:"من محدود به محدودیت‌های بدن و ذهن هستم."},
  {stage:2,en:"I sense the expansion beyond perceived limits.",de:"Ich spüre die Ausdehnung über wahrgenommene Grenzen hinaus.",fa:"من گسترش فراتر از مرزهای درک‌شده را حس می‌کنم."},
  {stage:3,en:"I exist beyond all limitations; I am infinite presence.",de:"Ich existiere jenseits aller Begrenzungen; ich bin unendliche Präsenz.",fa:"من فراتر از همه محدودیت‌ها وجود دارم؛ من حضور بی‌نهایت هستم."},

  {stage:1,en:"I judge and label what I experience.",de:"Ich urteile und etikettiere, was ich erfahre.",fa:"من تجربه‌هایم را قضاوت و برچسب می‌زنم."},
  {stage:2,en:"I witness my judgments and release them.",de:"Ich beobachte meine Urteile und lasse sie los.",fa:"من قضاوت‌های خود را مشاهده می‌کنم و رها می‌کنم."},
  {stage:3,en:"I am the pure witness; all distinctions are reflections of my own mind.",de:"Ich bin der reine Zeuge; alle Unterschiede sind Spiegelungen meines eigenen Geistes.",fa:"من شاهد مطلق هستم؛ همه تمایزات بازتاب ذهن خودم هستند."}
];

// STAGE_FULL array (full localized stage explanations for all 3 languages)
const STAGE_FULL = [
  {
    en:`Stage I — Victimhood.
Score range: 0–10.

Description:
Stage I is the realm of victimhood where the self feels distant from its origin and lost in a density of forgetfulness. Life appears to happen to you rather than through you. Identity is entangled with stories, blame, and resistance.

Scoring meaning:
• High score (close to 10): deep immersion in victimhood, strong identification with external narratives, high resistance. Immediate shadow work and self-inquiry are recommended.
• Around 5: partial awareness; glimpses of truth appear and movement toward Stage II is possible with focused inner work.
• Low score (below 5): early awakening signs; readiness to begin shadow integration and shift into Stage II.

How this affects overall state:
The overall state is determined by the stage with the highest average score. If Stage I is highest, the overall state will read as Victimhood. Other stage scores provide context.`,
    de:`Stufe I — Opferbewusstsein.
Punkteskala: 0–10.

Beschreibung:
Stufe I ist das Reich des Opferbewusstseins, in dem das Selbst weit von seiner Quelle entfernt ist und in Dichte und Vergessenheit verloren scheint. Das Leben scheint dir zu widerfahren, anstatt durch dich zu geschehen. Identität ist verstrickt in Geschichten, Schuldzuweisungen und Widerstand.

Bedeutung der Punkte:
• Hoher Wert (nahe 10): tiefe Verstrickung ins Opferbewusstsein, starke Identifikation mit externen Narrativen, hoher Widerstand. Schattenarbeit und Selbstbefragung sind dringend empfohlen.
• Um 5: teilweise Bewusstheit; erste Wahrnehmungen der Wahrheit erscheinen und ein Übergang zu Stufe II ist möglich.
• Niedrig (unter 5): frühe Erwachenszeichen; Bereit für Schattenintegration und Verschiebung zu Stufe II.

Auswirkung auf den Gesamtzustand:
Der Gesamtzustand wird durch die Stufe mit dem höchsten Durchschnittswert bestimmt. Wenn Stufe I am höchsten ist, wird der Zustand als Opferbewusstsein angezeigt.`,
    fa:`مرحله I — قربانی بودن.
دامنه امتیاز: 0–10.

توضیحات:
مرحله I حوزه قربانی بودن است که خود احساس دوری از منبع خود دارد و در فراموشی و چگالی گم شده است. زندگی به نظر می‌رسد که بر من اتفاق می‌افتد، نه از طریق من. هویت با داستان‌ها، سرزنش و مقاومت درهم تنیده است.

معنای امتیاز:
• امتیاز بالا (نزدیک 10): غوطه‌وری عمیق در قربانی بودن، شناسایی قوی با روایت‌های بیرونی، مقاومت بالا. کار سایه و خودکاوی فوری توصیه می‌شود.
• حدود 5: آگاهی جزئی؛ نگاه‌هایی به حقیقت ظاهر می‌شوند و حرکت به سمت مرحله II ممکن است.
• امتیاز پایین (زیر 5): نشانه‌های بیداری اولیه؛ آماده برای ادغام سایه و حرکت به مرحله II.

چگونه بر حالت کلی تأثیر می‌گذارد:
حالت کلی توسط مرحله با بالاترین میانگین امتیاز تعیین می‌شود. اگر مرحله I بالاترین باشد، حالت کلی به عنوان قربانی بودن نشان داده می‌شود.`
  },
  {
    en:`Stage II — Participation.
Score range: 0–10.

Description:
Stage II is the realm of participation where the self begins to recognize its co-creative nature. Life happens through you. Awareness of patterns and responsiveness increases. The self becomes a participant rather than a victim.

Scoring meaning:
• High score: strong engagement with life’s flow, increased responsibility, deeper observation of patterns.
• Medium: intermittent participation; learning and practice needed.
• Low: initial awareness; conscious effort required to shift fully.

Effect on overall state:
Dominance of Stage II signals a shift from passivity to active participation, empowering self-direction and clarity.`,
    de:`Stufe II — Teilnahme.
Punkteskala: 0–10.

Beschreibung:
Stufe II ist das Reich der Teilnahme, in dem das Selbst seine mitgestaltende Natur erkennt. Das Leben passiert durch dich. Bewusstsein für Muster und Reaktionsfähigkeit nimmt zu. Das Selbst wird zum Teilnehmer statt Opfer.

Bedeutung der Punkte:
• Hoch: starke Einbindung in den Fluss des Lebens, gesteigerte Verantwortung, tiefere Beobachtung der Muster.
• Mittel: zeitweilige Teilnahme; Lernen und Übung erforderlich.
• Niedrig: erste Bewusstheit; bewusste Anstrengung notwendig, um vollständig zu wechseln.

Auswirkung:
Dominanz von Stufe II signalisiert den Übergang von Passivität zu aktiver Teilnahme, was Selbstbestimmung und Klarheit fördert.`,
    fa:`مرحله II — مشارکت.
دامنه امتیاز: 0–10.

توضیحات:
مرحله II حوزه مشارکت است که خود شروع به شناخت طبیعت هم‌آفرین خود می‌کند. زندگی از طریق من اتفاق می‌افتد. آگاهی از الگوها و پاسخگویی افزایش می‌یابد. خود به جای قربانی، شرکت‌کننده می‌شود.

معنای امتیاز:
• امتیاز بالا: مشارکت قوی با جریان زندگی، افزایش مسئولیت، مشاهده عمیق‌تر الگوها.
• متوسط: مشارکت گاه‌به‌گاه؛ نیاز به یادگیری و تمرین.
• پایین: آگاهی اولیه؛ تلاش آگاهانه برای انتقال کامل لازم است.

تأثیر بر حالت کلی:
غلبه مرحله II نشان‌دهنده انتقال از انفعالی به مشارکت فعال است و قدرت هدایت خود و وضوح را تقویت می‌کند.`
  },
  {
    en:`Stage III — Integration.
Score range: 0–10.

Description:
Stage III is the realm of integration, where the self embodies wholeness. Life happens as you. The separation dissolves; identification with external constructs fades. Awareness and presence are fully realized.

Scoring meaning:
• High score: complete integration, deep embodiment of self, effortless flow.
• Medium: partial integration; regular practice deepens presence.
• Low: initial glimpses; continued inner work required.

Effect on overall state:
Dominance of Stage III indicates mastery, unity, and presence as the primary mode of being.`,
    de:`Stufe III — Integration.
Punkteskala: 0–10.

Beschreibung:
Stufe III ist das Reich der Integration, in dem das Selbst Ganzheit verkörpert. Das Leben passiert als du. Trennung löst sich auf; Identifikation mit externen Konstrukten verblasst. Bewusstsein und Präsenz sind vollständig verwirklicht.

Bedeutung der Punkte:
• Hoch: vollständige Integration, tiefes Verkörpern des Selbst, müheloser Fluss.
• Mittel: teilweise Integration; regelmäßige Praxis vertieft Präsenz.
• Niedrig: erste Einblicke; fortgesetzte innere Arbeit erforderlich.

Auswirkung:
Dominanz von Stufe III zeigt Meisterschaft, Einheit und Präsenz als primären Seinsmodus.`,
    fa:`مرحله III — ادغام.
دامنه امتیاز: 0–10.

توضیحات:
مرحله III حوزه ادغام است، جایی که خود تجسم کامل را دارد. زندگی همان من است که رخ می‌دهد. جدایی از بین می‌رود؛ شناسایی با ساختارهای خارجی کمرنگ می‌شود. آگاهی و حضور به طور کامل تحقق می‌یابند.

معنای امتیاز:
• امتیاز بالا: ادغام کامل، تجسم عمیق خود، جریان بدون تلاش.
• متوسط: ادغام جزئی؛ تمرین منظم حضور را عمیق‌تر می‌کند.
• پایین: نگاه‌های اولیه؛ ادامه کار درونی لازم است.

تأثیر بر حالت کلی:
غلبه مرحله III نشان‌دهنده مهارت، وحدت و حضور به عنوان حالت اصلی بودن است.`
  }
];

let currentLang = 'en';
let currentQuestionIndex = 0;
let answers = [];

const panel = document.getElementById('panel');
const landingPane = document.getElementById('landingPane');
const questionPane = document.getElementById('questionPane');
const resultPane = document.getElementById('resultPane');
const langSelect = document.getElementById('langSelect');
const startBtn = document.getElementById('startBtn');
const nextBtn = document.getElementById('nextBtn');
const restartBtn = document.getElementById('restartBtn');
const questionText = document.getElementById('questionText');
const questionSlider = document.getElementById('questionSlider');
const landingSlider = document.getElementById('landingSlider');
const lblLeft = document.getElementById('lblLeft');
const lblMid = document.getElementById('lblMid');
const lblRight = document.getElementById('lblRight');

const stageIContent = document.getElementById('stageIContent');
const stageIIContent = document.getElementById('stageIIContent');
const stageIIIContent = document.getElementById('stageIIIContent');

function showLanding(){landingPane.classList.remove('hidden');questionPane.classList.add('hidden');resultPane.classList.add('hidden');}
function showQuestion(){landingPane.classList.add('hidden');questionPane.classList.remove('hidden');resultPane.classList.add('hidden');}
function showResult(){landingPane.classList.add('hidden');questionPane.classList.add('hidden');resultPane.classList.remove('hidden');}
function updateLang(){currentLang = langSelect.value;document.documentElement.dir=(currentLang==='fa'?'rtl':'ltr');document.getElementById('pageTitle').textContent=currentLang==='en'?'Spectrum of Awareness':currentLang==='de'?'Bewusstseinsspektrum':'طیف آگاهی';document.getElementById('landingText').textContent=currentLang==='en'?'This is a reflection of my inner consciousness called Spectrum of Awareness. I am answering a series of statements using the slider to indicate my agreement.':currentLang==='de'?'Dies ist eine Reflexion meines inneren Bewusstseins namens Bewusstseinsspektrum. Ich beantworte eine Reihe von Aussagen mit dem Schieberegler.':'این بازتابی از آگاهی درونی من به نام طیف آگاهی است. من به مجموعه‌ای از جملات پاسخ می‌دهم و با نوار لغزنده میزان توافق خود را مشخص می‌کنم.';lblLeft.textContent=currentLang==='en'?'Disagree':currentLang==='de'?'Ablehnen':'مخالف';lblMid.textContent=currentLang==='en'?'Uncertain':currentLang==='de'?'Unsicher':'مطمئن نیستم';lblRight.textContent=currentLang==='en'?'Agree':currentLang==='de'?'Zustimmen':'موافق';}

langSelect.addEventListener('change',()=>{updateLang();});
startBtn.addEventListener('click',()=>{currentQuestionIndex=0;answers=[];showQuestion();updateQuestion();});
nextBtn.addEventListener('click',()=>{answers.push(Number(questionSlider.value));currentQuestionIndex++;if(currentQuestionIndex>=QUESTIONS.length){computeResult();showResult();}else{updateQuestion();}});
restartBtn.addEventListener('click',()=>{showLanding();});

function updateQuestion(){let q=QUESTIONS[currentQuestionIndex];questionText.textContent=q[currentLang];questionSlider.value=5;}

function computeResult(){
  let scores=[0,0,0];let counts=[0,0,0];
  for(let i=0;i<answers.length;i++){let stage=QUESTIONS[i].stage;scores[stage-1]+=answers[i];counts[stage-1]++;}
  let avgScores=[scores[0]/counts[0],scores[1]/counts[1],scores[2]/counts[2]];
  document.getElementById('scoreI').textContent=avgScores[0].toFixed(1);
  document.getElementById('scoreII').textContent=avgScores[1].toFixed(1);
  document.getElementById('scoreIII').textContent=avgScores[2].toFixed(1);
  let dominant=Math.max(...avgScores);let dominantIndex=avgScores.indexOf(dominant);
  const dominantText=['en','de','fa'].includes(currentLang)?STAGE_FULL[dominantIndex][currentLang]:STAGE_FULL[dominantIndex]['en'];
  document.getElementById('dominantBox').textContent=dominantText.split('\n')[0]; // Only title for dominant
  stageIContent.textContent=STAGE_FULL[0][currentLang];stageIIContent.textContent=STAGE_FULL[1][currentLang];stageIIIContent.textContent=STAGE_FULL[2][currentLang];
}

showLanding();updateLang();
</script>
</body>
</html>
