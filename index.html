<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Spectrum of Awareness</title>
<style>
  :root{
    --panel-width:720px;
    --accent:#4a90e2;
    --bg:#f5f7fa;
    --card:#ffffff;
    --muted:#666;
    --text:#111;
  }
  html,body{height:100%;margin:0;background:var(--bg);font-family:-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--text);}
  .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:24px;}
  .panel{width:min(92%,var(--panel-width));max-width:var(--panel-width);background:var(--card);border-radius:14px;box-shadow:0 10px 30px rgba(20,20,30,0.06);padding:34px;box-sizing:border-box;text-align:center;}
  h1{margin:0 0 18px 0;font-weight:400;color:#444;font-size:22px;}
  .row{display:flex;justify-content:center;gap:12px;align-items:center;margin-bottom:20px;}
  select{padding:8px 12px;font-size:15px;border-radius:8px;border:1px solid #e6e6e6;background:white;}
  p.lead{margin:0 0 18px 0;color:#666;font-size:15px;line-height:1.45;}
  .fixed-slider-wrap{width:100%;display:flex;flex-direction:column;align-items:center;gap:6px;margin:18px 0 8px 0;}
  .fixed-track{width:92%;max-width:640px;}
  input[type="range"]{-webkit-appearance:none;width:100%;height:12px;border-radius:10px;background:#e6e6e6;outline:none;margin:0;padding:0;}
  input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:30px;height:30px;border-radius:50%;background:var(--accent);box-shadow:0 6px 18px rgba(74,144,226,0.24);border:4px solid white;margin-top:-9px;cursor:pointer;}
  input[type="range"]::-moz-range-thumb{width:30px;height:30px;border-radius:50%;background:var(--accent);box-shadow:0 6px 18px rgba(74,144,226,0.24);border:4px solid white;cursor:pointer;}
  .slider-labels{width:92%;max-width:640px;display:flex;justify-content:space-between;color:var(--muted);font-size:13px;margin-top:8px;user-select:none;}
  .btn{display:inline-block;padding:12px 28px;border-radius:28px;background:linear-gradient(180deg,var(--accent),#2f7fcf);color:white;border:none;font-size:15px;cursor:pointer;box-shadow:0 6px 18px rgba(46,119,205,0.18);margin-top:18px;}
  .btn:active{transform:translateY(1px);}
  .question-container{width:100%;}
  .result-row{margin-top:12px;color:#333;font-size:15px;}
  .result-stage{font-weight:600;margin:6px 0;}
  .hidden{display:none;}
  :root[dir="rtl"] .panel{direction:rtl;}
  :root[dir="rtl"] .slider-labels{direction:rtl;}
  #questionText{font-size:18px;line-height:1.4;margin:6px 0 14px 0;text-align:center;word-break:break-word;}
</style>
</head>
<body>
<div class="wrap">
  <div class="panel" id="panel">

    <!-- Title - visible on Landing & Result only -->
    <h1 id="pageTitle">Spectrum of Awareness</h1>

    <!-- Language dropdown - VISIBLE ONLY on landing (we hide it during questionnaire/result) -->
    <div class="row" id="langRow">
      <select id="langSelect" aria-label="Language">
        <option value="en">English</option>
        <option value="de">Deutsch</option>
        <option value="fa">فارسی</option>
      </select>
    </div>

    <!-- Landing pane -->
    <div id="landingPane">
      <p class="lead" id="landingText">This is a reflection of my inner consciousness called Spectrum of Awareness. I am answering a series of statements using the slider to indicate my agreement.</p>

      <div class="fixed-slider-wrap">
        <div class="fixed-track">
          <input id="landingSlider" type="range" min="0" max="10" value="5" />
        </div>
        <div class="slider-labels" id="landingLabels">
          <span id="lblLeft">Disagree</span>
          <span id="lblMid">Uncertain</span>
          <span id="lblRight">Agree</span>
        </div>
      </div>

      <button id="startBtn" class="btn">Start</button>
    </div>

    <!-- Questionnaire pane -->
    <div id="questionPane" class="hidden">
      <div id="questionText"></div>

      <div class="fixed-slider-wrap">
        <div class="fixed-track">
          <input id="questionSlider" type="range" min="0" max="10" value="5" />
        </div>
        <!-- intentionally no labels here -->
      </div>

      <button id="nextBtn" class="btn">Next</button>
    </div>

    <!-- Result pane -->
    <div id="resultPane" class="hidden">
      <div class="result-row">
        <div id="stageI" class="result-stage"></div>
        <div id="stageII" class="result-stage"></div>
        <div id="stageIII" class="result-stage"></div>
      </div>
      <div class="result-row" id="resultText" style="margin-top:18px;"></div>
      <div style="margin-top:18px;">
        <button id="restartBtn" class="btn">Restart</button>
      </div>
    </div>

  </div>
</div>

<script>
/* === Questions arrays (full three-language lists) === */
const QUESTIONS = {
  en: [
    "Life happens to me.",
    "I notice patterns repeating and wonder why.",
    "I was created.",
    "I am questioning creation.",
    "I am the creator.",
    "I need validation to feel seen.",
    "I am validated and seen.",
    "I am validation.",
    "Others exist.",
    "Are others beings?",
    "Others are not beings.",
    "There is someone (something) out there.",
    "Is there anyone out there?",
    "There is no one out there.",
    "I am the victim of life.",
    "I am connected to a source, a higher self or god.",
    "I am the source; god is a concept within me.",
    "Someone has built the wall.",
    "I am a brick in the wall.",
    "I am the wall, shaping the wall constantly.",
    "I blame the society for everything I experience.",
    "I am part of society, therefore I blame myself.",
    "Society arises from me; I blame no one.",
    "Everything is unfair; this world must change.",
    "I must change the world and bring fairness into this.",
    "I radiate fairness; nothing needs to change.",
    "I need to be seen; the world must acknowledge me.",
    "I see myself; there is no need to be seen.",
    "Let there be light — I am projecting the world.",
    "There is god.",
    "There is no god.",
    "God is a concept created by me.",
    "I need to belong to feel whole.",
    "I am not alone; I belong.",
    "I am alone — the only one.",
    "Reality is co-created; I am within a hierarchy and powerless.",
    "Reality is being projected by me.",
    "I am authoring reality; I am the power of all frequencies."
  ],
  de: [
    "Das Leben passiert mir.",
    "Ich bemerke sich wiederholende Muster und frage mich warum.",
    "Ich wurde erschaffen.",
    "Ich hinterfrage die Schöpfung.",
    "Ich bin der Schöpfer.",
    "Ich brauche Bestätigung, um gesehen zu werden.",
    "Ich bin bestätigt und gesehen.",
    "Ich bin die Bestätigung.",
    "Andere existieren.",
    "Sind andere Wesen?",
    "Andere sind keine Wesen.",
    "Da ist jemand (etwas) da draußen.",
    "Gibt es jemanden da draußen?",
    "Da ist niemand da draußen.",
    "Ich bin das Opfer des Lebens.",
    "Ich bin verbunden mit einer Quelle, einem höheren Selbst oder Gott.",
    "Ich bin die Quelle; Gott ist ein Konzept in mir.",
    "Jemand hat die Mauer gebaut.",
    "Ich bin ein Ziegel in der Mauer.",
    "Ich bin die Mauer, die die Mauer ständig formt.",
    "Ich gebe der Gesellschaft die Schuld für alles, was ich erlebe.",
    "Ich bin Teil der Gesellschaft, daher gebe ich mir selbst die Schuld.",
    "Die Gesellschaft entsteht aus mir; ich gebe niemandem die Schuld.",
    "Alles ist unfair; diese Welt muss sich ändern.",
    "Ich muss die Welt verändern und Gerechtigkeit bringen.",
    "Ich strahle Gerechtigkeit aus; nichts muss sich ändern.",
    "Ich muss gesehen werden; die Welt muss mich anerkennen.",
    "Ich sehe mich selbst; es ist nicht nötig, gesehen zu werden.",
    "Es werde Licht — Ich projiziere die Welt.",
    "Es gibt Gott.",
    "Es gibt keinen Gott.",
    "Gott ist ein von mir geschaffenes Konzept.",
    "Ich muss dazugehören, um mich vollständig zu fühlen.",
    "Ich bin nicht allein; ich gehöre dazu.",
    "Ich bin allein — der Einzige.",
    "Realität wird miterschaffen; ich bin innerhalb einer Hierarchie und machtlos.",
    "Die Realität wird von mir projiziert.",
    "Ich erschaffe die Realität; ich bin die Macht aller Frequenzen."
  ],
  fa: [
    "زندگی برای من اتفاق می‌افتد.",
    "من الگوهای تکراری را مشاهده می‌کنم و می‌پرسم چرا.",
    "من خلق شده‌ام.",
    "من در مورد خلقت سؤال می‌کنم.",
    "من خالق هستم.",
    "من برای دیده شدن به تأیید نیاز دارم.",
    "من تأیید و دیده شده‌ام.",
    "من خود تأیید هستم.",
    "دیگران وجود دارند.",
    "آیا دیگران موجود هستند؟",
    "دیگران موجود نیستند.",
    "کسی (چیزی) در بیرون وجود دارد.",
    "آیا کسی در بیرون هست؟",
    "کسی در بیرون وجود ندارد.",
    "من قربانی زندگی هستم.",
    "من به منبع، خود برتر یا خدا متصل هستم.",
    "من منبع هستم؛ خدا یک مفهوم درون من است.",
    "کسی دیوار را ساخته است.",
    "من یک آجر در دیوار هستم.",
    "من دیوار هستم، دیوار را دائماً شکل می‌دهم.",
    "من همه چیز را به جامعه نسبت می‌دهم.",
    "من بخشی از جامعه هستم، بنابراین خودم را مقصر می‌دانم.",
    "جامعه از من بوجود می‌آید؛ من کسی را سرزنش نمی‌کنم.",
    "همه چیز ناعادلانه است؛ این جهان باید تغییر کند.",
    "من باید جهان را تغییر دهم و عدالت بیاورم.",
    "من عدالت می‌تابانم؛ هیچ چیزی نیاز به تغییر ندارد.",
    "من نیاز دارم دیده شوم؛ جهان باید من را ببیند.",
    "من خودم را می‌بینم؛ نیازی به دیده شدن نیست.",
    "بگذار نور باشد — من جهان را خلق می‌کنم.",
    "خدا وجود دارد.",
    "خدا وجود ندارد.",
    "خدا یک مفهوم ساخته‌شده توسط من است.",
    "من نیاز دارم که تعلق داشته باشم تا کامل باشم.",
    "من تنها نیستم؛ من تعلق دارم.",
    "من تنها هستم — تنها یک موجود.",
    "واقعیت هم‌آفرین است؛ من در یک سلسله مراتب و ناتوان هستم.",
    "واقعیت توسط من خلق می‌شود.",
    "من واقعیت را می‌سازم؛ من قدرت تمام فرکانس‌ها هستم."
  ]
};

/* stage result texts */
const STAGE_TEXT = [
  { en: "My consciousness currently aligns with victimhood, experiencing challenges, learning, and growth is needed.",
    de: "Mein Bewusstsein stimmt derzeit mit Opferbewusstsein überein, Herausforderungen werden erlebt, Lernen und Wachstum sind notwendig.",
    fa: "آگاهی من در حال حاضر با قربانی بودن هماهنگ است؛ تجربهٔ چالش‌ها، نیاز به یادگیری و رشد وجود دارد." },
  { en: "My consciousness currently aligns with realization, observing patterns, questioning, and expanding awareness.",
    de: "Mein Bewusstsein stimmt derzeit mit Erkenntnis überein, beobachtet Muster, hinterfragt und erweitert das Bewusstsein.",
    fa: "آگاهی من در حال حاضر با درک هماهنگ است؛ مشاهدهٔ الگوها، پرسشگری و گسترش آگاهی." },
  { en: "My consciousness currently aligns with being, full authorship, source awareness, and deep consciousness.",
    de: "Mein Bewusstsein stimmt derzeit mit Sein, vollständiger Autorenschaft, Quellbewusstsein und tiefem Bewusstsein überein.",
    fa: "آگاهی من در حال حاضر با بودن، خالقیت کامل، آگاهی منبع و آگاهی عمیق هماهنگ است." }
];

let lang = "en";
let order = [];
let idx = 0;
let answers = [];

const root = document.documentElement;
const pageTitle = document.getElementById("pageTitle");
const langSelect = document.getElementById("langSelect");
const landingPane = document.getElementById("landingPane");
const questionPane = document.getElementById("questionPane");
const resultPane = document.getElementById("resultPane");
const startBtn = document.getElementById("startBtn");
const nextBtn = document.getElementById("nextBtn");
const questionText = document.getElementById("questionText");
const questionSlider = document.getElementById("questionSlider");
const landingSlider = document.getElementById("landingSlider");
const lblLeft = document.getElementById("lblLeft");
const lblMid  = document.getElementById("lblMid");
const lblRight = document.getElementById("lblRight");
const stageIEl = document.getElementById("stageI");
const stageIIEl = document.getElementById("stageII");
const stageIIIEl = document.getElementById("stageIII");
const resultTextEl = document.getElementById("resultText");
const restartBtn = document.getElementById("restartBtn");
const langRow = document.getElementById("langRow");

/* language application */
function applyLanguage(l){
  lang = l;
  if(lang === "fa"){ root.setAttribute("dir","rtl"); } else { root.setAttribute("dir","ltr"); }

  // page title text (Spectrum of Awareness translations)
  pageTitle.textContent = (lang==="en" ? "Spectrum of Awareness" : lang==="de" ? "Spektrum des Bewusstseins" : "طیف آگاهی");

  // landing description
  const desc = {
    en: "This is a reflection of my inner consciousness called Spectrum of Awareness. I am answering a series of statements using the slider to indicate my agreement.",
    de: "Dies ist eine Reflexion meines inneren Bewusstseins, genannt Spektrum des Bewusstseins. Ich beantworte eine Reihe von Aussagen mit dem Schieberegler.",
    fa: "این بازتابی از آگاهی درونی من به نام طیف آگاهی است. من به مجموعه‌ای از جملات پاسخ می‌دهم و با استفاده از نوار لغزنده میزان موافقت را مشخص می‌کنم."
  }[lang];
  document.getElementById("landingText").textContent = desc;

  // slider labels on landing
  const labels = { en:["Disagree","Uncertain","Agree"], de:["Ablehnen","Unentschieden","Zustimmen"], fa:["مخالف","نامطمئن","موافق"] }[lang];
  lblLeft.textContent = labels[0];
  lblMid.textContent  = labels[1];
  lblRight.textContent = labels[2];

  // button texts
  startBtn.textContent = (lang==="en" ? "Start" : lang==="de" ? "Start" : "شروع");
  nextBtn.textContent  = (lang==="en" ? "Next" : lang==="de" ? "Weiter" : "بعدی");
  restartBtn.textContent = (lang==="en" ? "Restart" : lang==="de" ? "Neu starten" : "دوباره");
}

/* utility: shuffle */
function shuffle(n){ const a=Array.from({length:n},(_,i)=>i); for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a; }

/* start */
startBtn.addEventListener("click", ()=>{
  // hide title and language select during questionnaire
  pageTitle.style.display = "none";
  langRow.style.display = "none";

  // prepare randomized order
  order = shuffle(QUESTIONS[lang].length);
  idx = 0;
  answers = [];
  landingPane.classList.add("hidden");
  resultPane.classList.add("hidden");
  questionPane.classList.remove("hidden");
  showQuestion();
});

/* show a question from randomized order */
function showQuestion(){
  questionSlider.value = 5; // middle
  const qIdx = order[idx];
  questionText.textContent = QUESTIONS[lang][qIdx];
  questionText.style.textAlign = "center";
}

/* next */
nextBtn.addEventListener("click", ()=>{
  answers.push(Number(questionSlider.value || 5));
  idx++;
  if(idx < order.length){
    showQuestion();
  } else {
    questionPane.classList.add("hidden");
    // show title only on result
    pageTitle.style.display = "";
    // keep langRow hidden (language select only on landing)
    landingPane.classList.add("hidden");
    resultPane.classList.remove("hidden");
    computeResult();
  }
});

/* compute result by grouping original indices into 3 chunks */
function computeResult(){
  const N = QUESTIONS[lang].length;
  const chunk = Math.floor(N/3);
  const sums = [0,0,0];
  // answers correspond to order[...] mapping:
  for(let i=0;i<order.length;i++){
    const orig = order[i];
    const val = answers[i] || 0;
    let s;
    if(orig < chunk) s = 0;
    else if(orig < 2*chunk) s = 1;
    else s = 2;
    sums[s] += val;
  }
  // averages
  const counts = [chunk, chunk, N - 2*chunk];
  const avgs = [
    counts[0] ? sums[0]/counts[0] : 0,
    counts[1] ? sums[1]/counts[1] : 0,
    counts[2] ? sums[2]/counts[2] : 0
  ];
  stageIEl.textContent = "Stage I: " + avgs[0].toFixed(1);
  stageIIEl.textContent = "Stage II: " + avgs[1].toFixed(1);
  stageIIIEl.textContent = "Stage III: " + avgs[2].toFixed(1);

  // highest stage only
  let highest = 0;
  if(avgs[1] > avgs[highest]) highest = 1;
  if(avgs[2] > avgs[highest]) highest = 2;
  resultTextEl.textContent = STAGE_TEXT[highest][lang];
}

/* restart from result (go back to landing) */
restartBtn.addEventListener("click", ()=>{
  resultPane.classList.add("hidden");
  landingPane.classList.remove("hidden");
  pageTitle.style.display = "";      // show title on landing
  langRow.style.display = "";        // show language select on landing
  landingSlider.value = 5;
  questionSlider.value = 5;
});

/* language change */
langSelect.addEventListener("change",(e)=>{ applyLanguage(e.target.value); landingSlider.value=5; questionSlider.value=5; });

/* initialize */
applyLanguage("en");
landingSlider.value = 5;
questionSlider.value = 5;
</script>
</body>
</html>
