<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Spectrum of Awareness</title>
<style>
  :root{
    --panel-width:720px;
    --accent:#666440;
    --bg:#f5f7fa;
    --card:#ffffff;
    --muted:#666;
    --text:#111;
  }
  html,body{height:100%;margin:0;background:var(--bg);font-family:-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--text);}
  .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:24px;}
  .panel{width:min(92%,var(--panel-width));max-width:var(--panel-width);background:var(--card);border-radius:14px;box-shadow:0 10px 30px rgba(20,20,30,0.06);padding:34px;box-sizing:border-box;text-align:center;}
  h1{margin:0 0 18px 0;font-weight:400;color:#444;font-size:22px;}
  .row{display:flex;justify-content:center;gap:12px;align-items:center;margin-bottom:20px;}
  select{padding:8px 12px;font-size:15px;border-radius:8px;border:1px solid #e6e6e6;background:white;}
  p.lead{margin:0 0 18px 0;color:#666;font-size:15px;line-height:1.45;}
  .fixed-slider-wrap{width:100%;display:flex;flex-direction:column;align-items:center;gap:6px;margin:18px 0 8px 0;}
  .fixed-track{width:92%;max-width:640px;}
  input[type="range"]{-webkit-appearance:none;width:100%;height:12px;border-radius:10px;background:#e6e6e6;outline:none;margin:0;padding:0;}
  input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:34px;height:18px;border-radius:50%;background:var(--accent);box-shadow:0 6px 18px rgba(102,100,64,0.24);border:2px solid white;margin-top:-3px;cursor:pointer;}
  input[type="range"]::-moz-range-thumb{width:34px;height:18px;border-radius:50%;background:var(--accent);box-shadow:0 6px 18px rgba(102,100,64,0.24);border:2px solid white;cursor:pointer;}
  .slider-labels{width:92%;max-width:640px;display:flex;justify-content:space-between;color:var(--muted);font-size:13px;margin-top:8px;user-select:none;}
  .btn{display:inline-block;padding:12px 28px;border-radius:28px;background:var(--accent);color:white;border:none;font-size:15px;cursor:pointer;box-shadow:0 6px 18px rgba(102,100,64,0.18);margin-top:18px;}
  .btn:active{transform:translateY(1px);}
  .question-container{width:100%;}
  .result-row{margin-top:12px;color:#333;font-size:15px;display:flex;justify-content:space-around;}
  .result-stage{font-weight:600;margin:6px 0;}
  .hidden{display:none;}
  :root[dir="rtl"] .panel{direction:rtl;}
  :root[dir="rtl"] .slider-labels{direction:rtl;}
  #questionText{font-size:18px;line-height:1.4;margin:6px 0 14px 0;text-align:center;word-break:break-word;}
</style>
</head>
<body>
<div class="wrap">
  <div class="panel" id="panel">

    <!-- Title & Language (Landing Page only) -->
    <h1 id="pageTitle">Spectrum of Awareness</h1>
    <div class="row" id="langRow">
      <select id="langSelect" aria-label="Language">
        <option value="en">English</option>
        <option value="de">Deutsch</option>
        <option value="fa">فارسی</option>
      </select>
    </div>

    <!-- Landing Pane -->
    <div id="landingPane">
      <p class="lead" id="landingText">This is a reflection of my inner consciousness called Spectrum of Awareness. I am answering a series of statements using the slider to indicate my agreement.</p>

      <div class="fixed-slider-wrap">
        <div class="fixed-track">
          <input id="landingSlider" type="range" min="0" max="10" value="5" />
        </div>
        <div class="slider-labels" id="landingLabels">
          <span id="lblLeft">Disagree</span>
          <span id="lblMid">Uncertain</span>
          <span id="lblRight">Agree</span>
        </div>
      </div>

      <button id="startBtn" class="btn">Start</button>
    </div>

    <!-- Questionnaire Pane -->
    <div id="questionPane" class="hidden">
      <div id="questionText"></div>

      <div class="fixed-slider-wrap">
        <div class="fixed-track">
          <input id="questionSlider" type="range" min="0" max="10" value="5" />
        </div>
        <div class="slider-labels" id="questionLabels">
          <span id="qLblLeft">Disagree</span>
          <span id="qLblMid">Uncertain</span>
          <span id="qLblRight">Agree</span>
        </div>
      </div>

      <button id="nextBtn" class="btn">Next</button>
    </div>

    <!-- Result Pane -->
    <div id="resultPane" class="hidden">
      <div class="result-row">
        <div id="stageI" class="result-stage">Stage I: 0</div>
        <div id="stageII" class="result-stage">Stage II: 0</div>
        <div id="stageIII" class="result-stage">Stage III: 0</div>
      </div>
      <div class="result-row" id="resultText" style="margin-top:18px;"></div>
      <div style="margin-top:18px;">
        <button id="restartBtn" class="btn">Restart</button>
      </div>
    </div>

  </div>
</div>

<script>
/* === Questions with explicit stage mapping === */
const QUESTIONS = [
  // Stage I
  {stage:1,text:{en:"I feel life is unfair or against me.",de:"Ich fühle, dass das Leben unfair oder gegen mich ist.",fa:"من احساس می‌کنم زندگی ناعادلانه یا علیه من است."}},
  {stage:1,text:{en:"I often compare myself to others.",de:"Ich vergleiche mich oft mit anderen.",fa:"من اغلب خود را با دیگران مقایسه می‌کنم."}},
  {stage:1,text:{en:"I seek validation or approval.",de:"Ich suche Bestätigung oder Anerkennung.",fa:"من به دنبال تأیید یا تصدیق هستم."}},
  {stage:1,text:{en:"I feel powerless to change what happens.",de:"Ich fühle mich machtlos, das Geschehene zu ändern.",fa:"من احساس می‌کنم قدرت تغییر اتفاقات را ندارم."}},
  {stage:1,text:{en:"I believe luck or fate decides outcomes.",de:"Ich glaube, dass Glück oder Schicksal das Ergebnis bestimmt.",fa:"من معتقدم شانس یا سرنوشت نتیجه را تعیین می‌کند."}},
  {stage:1,text:{en:"I hold resentment or blame.",de:"Ich hege Groll oder Schuldzuweisungen.",fa:"من کینه یا سرزنش دارم."}},
  {stage:1,text:{en:"I fear losing control.",de:"Ich fürchte, die Kontrolle zu verlieren.",fa:"من از دست دادن کنترل می‌ترسم."}},
  {stage:1,text:{en:"I think others owe me something.",de:"Ich denke, andere schulden mir etwas.",fa:"من فکر می‌کنم دیگران به من بدهکارند."}},
  {stage:1,text:{en:"I feel disconnected or unseen.",de:"Ich fühle mich getrennt oder ungesehen.",fa:"من احساس جدا شدن یا نادیده گرفته شدن می‌کنم."}},
  {stage:1,text:{en:"I think peace depends on circumstances.",de:"Ich denke, Frieden hängt von den Umständen ab.",fa:"من فکر می‌کنم صلح به شرایط بستگی دارد."}},
  // Stage II
  {stage:2,text:{en:"I notice patterns repeating and wonder why.",de:"Ich bemerke wiederkehrende Muster und frage mich warum.",fa:"من الگوهای تکراری را مشاهده می‌کنم و می‌پرسم چرا."}},
  {stage:2,text:{en:"I sense deeper meaning in challenges.",de:"Ich spüre tiefere Bedeutung in Herausforderungen.",fa:"من معنای عمیق‌تر را در چالش‌ها احساس می‌کنم."}},
  {stage:2,text:{en:"I question my thoughts and reactions.",de:"Ich hinterfrage meine Gedanken und Reaktionen.",fa:"من به افکار و واکنش‌هایم سؤال می‌کنم."}},
  {stage:2,text:{en:"I feel moments of calm beyond emotion.",de:"Ich fühle Momente der Ruhe jenseits der Emotion.",fa:"من لحظاتی از آرامش فراتر از احساس را تجربه می‌کنم."}},
  {stage:2,text:{en:"I begin forgiving and letting go.",de:"Ich beginne zu vergeben und loszulassen.",fa:"من شروع به بخشیدن و رها کردن می‌کنم."}},
  {stage:2,text:{en:"I recognize reflections in others.",de:"Ich erkenne Reflexionen in anderen.",fa:"من بازتاب‌ها را در دیگران می‌بینم."}},
  {stage:2,text:{en:"I am learning to direct my attention inward.",de:"Ich lerne, meine Aufmerksamkeit nach innen zu lenken.",fa:"من یاد می‌گیرم توجه خود را به درون هدایت کنم."}},
  {stage:2,text:{en:"I trust life more often than I resist it.",de:"Ich vertraue dem Leben öfter, als ich mich ihm widersetze.",fa:"من بیشتر به زندگی اعتماد دارم تا مقاومت کنم."}},
  {stage:2,text:{en:"I feel glimpses of unity and flow.",de:"Ich fühle Momente von Einheit und Fluss.",fa:"من لحظاتی از اتحاد و جریان را احساس می‌کنم."}},
  {stage:2,text:{en:"I begin to see love behind appearances.",de:"Ich beginne, die Liebe hinter den Erscheinungen zu sehen.",fa:"من شروع به دیدن عشق پشت ظاهرها می‌کنم."}},
  // Stage III
  {stage:3,text:{en:"I see all as one movement of consciousness.",de:"Ich sehe alles als eine Bewegung des Bewusstseins.",fa:"من همه چیز را به عنوان یک حرکت از آگاهی می‌بینم."}},
  {stage:3,text:{en:"I hold no resistance to what arises.",de:"Ich leiste keinem Geschehen Widerstand.",fa:"من مقاومتی نسبت به آنچه رخ می‌دهد ندارم."}},
  {stage:3,text:{en:"I experience peace independent of form.",de:"Ich erfahre Frieden unabhängig von der Form.",fa:"من آرامش را مستقل از فرم تجربه می‌کنم."}},
  {stage:3,text:{en:"I know love as my natural state.",de:"Ich erkenne Liebe als meinen natürlichen Zustand.",fa:"من عشق را به عنوان حالت طبیعی خود می‌شناسم."}},
  {stage:3,text:{en:"I speak from stillness, not reaction.",de:"Ich spreche aus Stille, nicht aus Reaktion.",fa:"من از سکون صحبت می‌کنم، نه واکنش."}},
  {stage:3,text:{en:"I see no separation between creation and creator.",de:"Ich sehe keine Trennung zwischen Schöpfung und Schöpfer.",fa:"من هیچ جدایی بین آفرینش و خالق نمی‌بینم."}},
  {stage:3,text:{en:"I feel timeless awareness beyond body and mind.",de:"Ich fühle zeitlose Bewusstheit jenseits von Körper und Geist.",fa:"من آگاهی بی‌زمان فراتر از جسم و ذهن را احساس می‌کنم."}},
  {stage:3,text:{en:"I understand that nothing is missing.",de:"Ich verstehe, dass nichts fehlt.",fa:"من می‌فهمم که هیچ چیزی کم نیست."}},
  {stage:3,text:{en:"I live without striving — just being.",de:"Ich lebe ohne Streben — einfach Sein.",fa:"من بدون تلاش زندگی می‌کنم — فقط بودن."}},
  {stage:3,text:{en:"I am love observing itself.",de:"Ich bin die Liebe, die sich selbst beobachtet.",fa:"من عشق هستم که خود را مشاهده می‌کند."}}
];

/* Stage descriptions */
const STAGE_TEXT = [
  { en: "My consciousness currently aligns with victimhood, experiencing challenges, learning, and growth is needed.",
    de: "Mein Bewusstsein stimmt derzeit mit Opferbewusstsein überein, Herausforderungen werden erlebt, Lernen und Wachstum sind notwendig.",
    fa: "آگاهی من در حال حاضر با قربانی بودن هماهنگ است؛ تجربهٔ چالش‌ها، نیاز به یادگیری و رشد وجود دارد." },
  { en: "My consciousness currently aligns with realization, observing patterns, questioning, and expanding awareness.",
    de: "Mein Bewusstsein stimmt derzeit mit Erkenntnis überein, beobachtet Muster, hinterfragt und erweitert das Bewusstsein.",
    fa: "آگاهی من در حال حاضر با درک هماهنگ است؛ مشاهدهٔ الگوها، پرسشگری و گسترش آگاهی." },
  { en: "My consciousness currently aligns with being, full authorship, source awareness, and deep consciousness.",
    de: "Mein Bewusstsein stimmt derzeit mit Sein, vollständiger Autorenschaft, Quellbewusstsein und tiefem Bewusstsein überein.",
    fa: "آگاهی من در حال حاضر با بودن، خالقیت کامل، آگاهی منبع و آگاهی عمیق هماهنگ است." }
];

let lang="en", order=[], idx=0, answers=[];

const root = document.documentElement;
const pageTitle = document.getElementById("pageTitle");
const langSelect = document.getElementById("langSelect");
const landingPane = document.getElementById("landingPane");
const questionPane = document.getElementById("questionPane");
const resultPane = document.getElementById("resultPane");
const startBtn = document.getElementById("startBtn");
const nextBtn = document.getElementById("nextBtn");
const questionText = document.getElementById("questionText");
const questionSlider = document.getElementById("questionSlider");
const landingSlider = document.getElementById("landingSlider");
const lblLeft = document.getElementById("lblLeft");
const lblMid  = document.getElementById("lblMid");
const lblRight = document.getElementById("lblRight");
const qLblLeft = document.getElementById("qLblLeft");
const qLblMid  = document.getElementById("qLblMid");
const qLblRight = document.getElementById("qLblRight");
const stageI = document.getElementById("stageI");
const stageII = document.getElementById("stageII");
const stageIII = document.getElementById("stageIII");
const resultText = document.getElementById("resultText");
const restartBtn = document.getElementById("restartBtn");

/* Language selection */
langSelect.addEventListener("change",()=>{lang=langSelect.value; setDirection(); updateLabels(); updateLandingText();});
function setDirection(){root.dir = (lang==="fa")?"rtl":"ltr";}
function updateLabels(){
  lblLeft.textContent=(lang==="de")?"Ablehnen":(lang==="fa")?"مخالفت":"Disagree";
  lblMid.textContent=(lang==="de")?"Ungewiss":(lang==="fa")?"نامشخص":"Uncertain";
  lblRight.textContent=(lang==="de")?"Zustimmen":(lang==="fa")?"موافقت":"Agree";
  qLblLeft.textContent=lblLeft.textContent;
  qLblMid.textContent=lblMid.textContent;
  qLblRight.textContent=lblRight.textContent;
}
function updateLandingText(){
  document.getElementById("landingText").textContent = (lang==="de")?"Dies ist eine Reflexion meines inneren Bewusstseins namens Spectrum of Awareness. Ich beantworte eine Reihe von Aussagen mithilfe des Schiebereglers, um meine Zustimmung anzugeben.":(lang==="fa")?"این بازتاب آگاهی درونی من به نام طیف آگاهی است. من یک سری جملات را با استفاده از لغزنده برای نشان دادن موافقت خود پاسخ می‌دهم.":"This is a reflection of my inner consciousness called Spectrum of Awareness. I am answering a series of statements using the slider to indicate my agreement.";
}
updateLabels(); updateLandingText(); setDirection();

/* Start questionnaire */
startBtn.addEventListener("click",()=>{
  landingPane.classList.add("hidden");
  questionPane.classList.remove("hidden");
  idx=0;
  answers=[];
  order = QUESTIONS.map((_,i)=>i).sort(()=>Math.random()-0.5); // randomize
  showQuestion();
});

function showQuestion(){
  const q = QUESTIONS[order[idx]];
  questionText.textContent = q.text[lang];
  questionSlider.value = 5;
}

/* Next button */
nextBtn.addEventListener("click",()=>{
  answers.push({stage:QUESTIONS[order[idx]].stage, value:+questionSlider.value});
  idx++;
  if(idx>=order.length){showResult();}
  else{showQuestion();}
});

/* Calculate result */
function showResult(){
  questionPane.classList.add("hidden");
  resultPane.classList.remove("hidden");
  const stageSums=[0,0,0], stageCounts=[0,0,0];
  answers.forEach(a=>{
    stageSums[a.stage-1]+=a.value;
    stageCounts[a.stage-1]++;
  });
  const stageAvgs=stageSums.map((sum,i)=>sum/stageCounts[i]||0);
  stageI.textContent="Stage I: "+stageAvgs[0].toFixed(1);
  stageII.textContent="Stage II: "+stageAvgs[1].toFixed(1);
  stageIII.textContent="Stage III: "+stageAvgs[2].toFixed(1);
  const maxIndex = stageAvgs.indexOf(Math.max(...stageAvgs));
  resultText.textContent = STAGE_TEXT[maxIndex][lang];
}

/* Restart */
restartBtn.addEventListener("click",()=>{
  resultPane.classList.add("hidden");
  landingPane.classList.remove("hidden");
  landingSlider.value=5;
});
</script>
</body>
</html>
