<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Spectrum of Awareness</title>
<style>
  :root{
    --panel-width:720px;
    --accent:#666440; /* updated color */
    --bg:#f5f7fa;
    --card:#ffffff;
    --muted:#666;
    --text:#111;
  }
  html,body{height:100%;margin:0;background:var(--bg);font-family:-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--text);}
  .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:24px;}
  .panel{width:min(92%,var(--panel-width));max-width:var(--panel-width);background:var(--card);border-radius:14px;box-shadow:0 10px 30px rgba(20,20,30,0.06);padding:34px;box-sizing:border-box;text-align:center;}
  h1{margin:0 0 18px 0;font-weight:400;color:#444;font-size:22px;}
  .row{display:flex;justify-content:center;gap:12px;align-items:center;margin-bottom:20px;}
  select{padding:8px 12px;font-size:15px;border-radius:8px;border:1px solid #e6e6e6;background:white;}
  p.lead{margin:0 0 18px 0;color:#666;font-size:15px;line-height:1.45;}
  .fixed-slider-wrap{width:100%;display:flex;flex-direction:column;align-items:center;gap:6px;margin:18px 0 8px 0;}
  .fixed-track{width:92%;max-width:640px;}
  input[type="range"]{-webkit-appearance:none;width:100%;height:12px;border-radius:10px;background:#e6e6e6;outline:none;margin:0;padding:0;}
  input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:34px;height:18px;border-radius:9px;background:var(--accent);box-shadow:0 6px 18px rgba(102,100,64,0.24);border:2px solid white;margin-top:-3px;cursor:pointer;}
  input[type="range"]::-moz-range-thumb{width:34px;height:18px;border-radius:9px;background:var(--accent);box-shadow:0 6px 18px rgba(102,100,64,0.24);border:2px solid white;cursor:pointer;}
  .slider-labels{width:92%;max-width:640px;display:flex;justify-content:space-between;color:var(--muted);font-size:13px;margin-top:8px;user-select:none;}
  .btn{display:inline-block;padding:12px 28px;border-radius:28px;background:var(--accent);color:white;border:none;font-size:15px;cursor:pointer;box-shadow:0 6px 18px rgba(102,100,64,0.18);margin-top:18px;}
  .btn:active{transform:translateY(1px);}
  .question-container{width:100%;}
  .result-row{margin-top:12px;color:#333;font-size:15px;}
  .result-stage{font-weight:600;margin:6px 0;}
  .hidden{display:none;}
  :root[dir="rtl"] .panel{direction:rtl;}
  :root[dir="rtl"] .slider-labels{direction:rtl;}
  #questionText{font-size:18px;line-height:1.4;margin:6px 0 14px 0;text-align:center;word-break:break-word;}
</style>
</head>
<body>
<div class="wrap">
  <div class="panel" id="panel">

    <h1 id="pageTitle">Spectrum of Awareness</h1>

    <div class="row" id="langRow">
      <select id="langSelect" aria-label="Language">
        <option value="en">English</option>
        <option value="de">Deutsch</option>
        <option value="fa">فارسی</option>
      </select>
    </div>

    <div id="landingPane">
      <p class="lead" id="landingText">This is a reflection of my inner consciousness called Spectrum of Awareness. I am answering a series of statements using the slider to indicate my agreement.</p>

      <div class="fixed-slider-wrap">
        <div class="fixed-track">
          <input id="landingSlider" type="range" min="0" max="10" value="5" />
        </div>
        <div class="slider-labels" id="landingLabels">
          <span id="lblLeft">Disagree</span>
          <span id="lblMid">Uncertain</span>
          <span id="lblRight">Agree</span>
        </div>
      </div>

      <button id="startBtn" class="btn">Start</button>
    </div>

    <div id="questionPane" class="hidden">
      <div id="questionText"></div>
      <div class="fixed-slider-wrap">
        <div class="fixed-track">
          <input id="questionSlider" type="range" min="0" max="10" value="5" />
        </div>
        <div class="slider-labels" id="questionLabels">
          <span id="lblLeftQ">Disagree</span>
          <span id="lblMidQ">Uncertain</span>
          <span id="lblRightQ">Agree</span>
        </div>
      </div>
      <button id="nextBtn" class="btn">Next</button>
    </div>

    <div id="resultPane" class="hidden">
      <div class="result-row">
        <div id="stageI" class="result-stage"></div>
        <div id="stageII" class="result-stage"></div>
        <div id="stageIII" class="result-stage"></div>
      </div>
      <div class="result-row" id="resultText" style="margin-top:18px;"></div>
      <div style="margin-top:18px;">
        <button id="restartBtn" class="btn">Restart</button>
      </div>
    </div>

  </div>
</div>

<script>
/* === Questions arrays (combined original + new, mapped to stages) === */
const QUESTIONS = {
  en: [
    /* Stage I */
    "Life happens to me.",
    "I feel life is unfair or against me.",
    "I am the victim of life.",
    "I need validation to feel seen.",
    "I blame society for everything I experience.",
    "I feel disconnected or unseen.",
    "I was created.",
    "There is someone or something out there.",
    "Someone has built the wall.",
    "I feel powerless to change what happens.",
    "I believe luck or fate decides outcomes.",
    "I think others owe me something.",
    "I fear losing control.",
    "Others exist.",
    "There is God.",
    "Everything is unfair; this world needs to be changed.",
    "I need to belong to feel whole.",
    "I often compare myself to others.",
    "I think peace depends on circumstances.",
    "I hold resentment or blame.",
    "There is hell and heaven.",
    
    /* Stage II */
    "Life happens through me.",
    "I notice patterns repeating and wonder why.",
    "I am connected to a source (higher self, god).",
    "I am validated and seen.",
    "I am part of society, therefore I blame myself.",
    "I feel glimpses of unity and flow.",
    "I am questioning creation.",
    "Is there anyone out there?",
    "I am a brick in the wall.",
    "I feel moments of calm beyond emotion.",
    "I begin forgiving and letting go.",
    "I trust life more often than I resist it.",
    "I am learning to direct my attention inward.",
    "Are others beings?",
    "There is no state; just being?",
    "I must change the world and bring fairness into this.",
    "I am not alone; I belong.",
    "I sense deeper meaning in challenges.",
    "I begin to see love behind appearances.",
    "I recognize reflections in others.",
    "Hell and heaven are the state of being.",
    
    /* Stage III */
    "Life happens as me.",
    "I see all as one movement of consciousness.",
    "I am the source; God is just a concept within me.",
    "I am validation.",
    "Society arises from me; I blame no one.",
    "I live without striving — just being.",
    "I am the creator.",
    "There is no one out there.",
    "I am the wall, shaping the wall constantly.",
    "I know love as my natural state.",
    "I speak from stillness, not reaction.",
    "I understand that nothing is missing.",
    "I feel timeless awareness beyond body and mind.",
    "Others aren’t beings.",
    "God is a concept created by me.",
    "I radiate fairness; nothing needs to be changed.",
    "I am alone — the only one.",
    "I hold no resistance to what arises.",
    "I am love observing itself.",
    "I see no separation between creation and creator.",
    "There is no state, just being."
  ]
};

const STAGE_TEXT = [
  { en: "My consciousness currently aligns with victimhood, experiencing challenges, learning, and growth is needed." },
  { en: "My consciousness currently aligns with realization, observing patterns, questioning, and expanding awareness." },
  { en: "My consciousness currently aligns with being, full authorship, source awareness, and deep consciousness." }
];

let lang = "en";
let order = [];
let idx = 0;
let answers = [];

const root = document.documentElement;
const pageTitle = document.getElementById("pageTitle");
const langSelect = document.getElementById("langSelect");
const landingPane = document.getElementById("landingPane");
const questionPane = document.getElementById("questionPane");
const resultPane = document.getElementById("resultPane");
const startBtn = document.getElementById("startBtn");
const nextBtn = document.getElementById("nextBtn");
const questionText = document.getElementById("questionText");
const questionSlider = document.getElementById("questionSlider");
const landingSlider = document.getElementById("landingSlider");
const lblLeft = document.getElementById("lblLeft");
const lblMid  = document.getElementById("lblMid");
const lblRight = document.getElementById("lblRight");
const stageIEl = document.getElementById("stageI");
const stageIIEl = document.getElementById("stageII");
const stageIIIEl = document.getElementById("stageIII");
const resultTextEl = document.getElementById("resultText");
const restartBtn = document.getElementById("restartBtn");
const langRow = document.getElementById("langRow");

/* language application */
function applyLanguage(l){
  lang = l;
  if(lang === "fa"){ root.setAttribute("dir","rtl"); } else { root.setAttribute("dir","ltr"); }

  pageTitle.textContent = "Spectrum of Awareness";

  lblLeft.textContent = "Disagree";
  lblMid.textContent  = "Uncertain";
  lblRight.textContent = "Agree";
  document.getElementById("lblLeftQ").textContent = "Disagree";
  document.getElementById("lblMidQ").textContent = "Uncertain";
  document.getElementById("lblRightQ").textContent = "Agree";

  startBtn.textContent = "Start";
  nextBtn.textContent  = "Next";
  restartBtn.textContent = "Restart";
}

/* utility: shuffle */
function shuffle(n){ const a=Array.from({length:n},(_,i)=>i); for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a; }

/* start */
startBtn.addEventListener("click", ()=>{
  pageTitle.style.display = "none";
  langRow.style.display = "none";

  order = shuffle(QUESTIONS[lang].length);
  idx = 0;
  answers = [];
  landingPane.classList.add("hidden");
  resultPane.classList.add("hidden");
  questionPane.classList.remove("hidden");
  showQuestion();
});

/* show a question */
function showQuestion(){
  questionSlider.value = 5;
  const qIdx = order[idx];
  questionText.textContent = QUESTIONS[lang][qIdx];
  questionText.style.textAlign = "center";
}

/* next */
nextBtn.addEventListener("click", ()=>{
  answers.push(Number(questionSlider.value || 5));
  idx++;
  if(idx < order.length){
    showQuestion();
  } else {
    questionPane.classList.add("hidden");
    pageTitle.style.display = "";
    landingPane.classList.add("hidden");
    resultPane.classList.remove("hidden");
    computeResult();
  }
});

/* compute result using 0-10 scale */
function computeResult(){
  const N = QUESTIONS[lang].length;
  const chunk = Math.floor(N/3);
  const sums = [0,0,0];
  const counts = [0,0,0];
  for(let i=0;i<order.length;i++){
    const orig = order[i];
    const val = answers[i] || 0;
    let s;
    if(orig < chunk) s = 0;
    else if(orig < 2*chunk) s = 1;
    else s = 2;
    sums[s] += val;
    counts[s]++;
  }
  const avgs = sums.map((v,i)=>counts[i]?v/counts[i]:0);
  stageIEl.textContent = "Stage I: " + avgs[0].toFixed(1);
  stageIIEl.textContent = "Stage II: " + avgs[1].toFixed(1);
  stageIIIEl.textContent = "Stage III: " + avgs[2].toFixed(1);

  let highest = 0;
  if(avgs[1] > avgs[highest]) highest = 1;
  if(avgs[2] > avgs[highest]) highest = 2;
  resultTextEl.textContent = STAGE_TEXT[highest][lang];
}

/* restart */
restartBtn.addEventListener("click", ()=>{
  resultPane.classList.add("hidden");
  landingPane.classList.remove("hidden");
  pageTitle.style.display = "";
  langRow.style.display = "";
  landingSlider.value = 5;
  questionSlider.value = 5;
});

/* language change */
langSelect.addEventListener("change",(e)=>{ applyLanguage(e.target.value); landingSlider.value=5; questionSlider.value=5; });

/* initialize */
applyLanguage("en");
landingSlider.value = 5;
questionSlider.value = 5;
</script>
</body>
</html>
